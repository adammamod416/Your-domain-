<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            font-size: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .settings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        
        .form-group {
            margin-bottom: 0;
        }
        
        label {
            display: block;
            font-size: 13px;
            font-weight: 700;
            color: #495057;
            margin-bottom: 6px;
            text-transform: uppercase;
        }
        
        input[type="text"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        input:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            min-height: 300px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            resize: vertical;
        }
        
        button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            font-size: 17px;
            text-transform: uppercase;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            text-align: center;
        }
        
        .result.success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 3px solid #28a745;
        }
        
        .result.error {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border: 3px solid #dc3545;
        }
        
        .result.loading {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 3px solid #ffc107;
        }
        
        .result-icon {
            font-size: 50px;
            margin-bottom: 15px;
        }
        
        .result-url {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            word-break: break-all;
        }
        
        .result-url a {
            color: #0070f3;
            font-weight: 600;
            text-decoration: none;
        }
        
        .btn-copy {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 12px 24px;
            width: auto;
            display: inline-block;
            margin-top: 10px;
        }
        
        .help-text {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .note {
            background: #e7f3ff;
            border: 2px solid #0070f3;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .settings {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸš€ Ù…Ù†ØµØ© Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</h1>
    <p class="subtitle">Ø§Ù„ØµÙ‚ ÙƒÙˆØ¯ HTML Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª</p>
    
    <div class="note">
        <strong>ğŸ’¡ Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©ØŸ</strong><br>
        Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªÙ…Ù†Ø¹ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©. Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ØªØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ù†Ø³Ø® ÙˆÙ„ØµÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¨Ø§Ø´Ø±Ø©.
    </div>
    
    <div class="settings">
        <div class="form-group">
            <label>ğŸ”‘ GitHub Token</label>
            <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx">
            <div class="help-text">
                <a href="https://github.com/settings/tokens/new" target="_blank" style="color: #0070f3;">Ø¥Ù†Ø´Ø§Ø¡ Token Ø¬Ø¯ÙŠØ¯</a>
            </div>
        </div>
        
        <div class="form-group">
            <label>ğŸ“¦ Repository</label>
            <input type="text" id="repo" placeholder="username/repo-name">
            <div class="help-text">Ù…Ø«Ø§Ù„: ahmed/my-sites</div>
        </div>
        
        <div class="form-group">
            <label>ğŸ“ Base Path</label>
            <input type="text" id="path" value="sites" placeholder="sites">
        </div>
        
        <div class="form-group">
            <label>ğŸ·ï¸ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
            <input type="text" id="siteName" placeholder="my-portfolio">
        </div>
    </div>
    
    <div class="form-group">
        <label>ğŸ“ ÙƒÙˆØ¯ HTML</label>
        <textarea id="htmlCode" placeholder="Ø§Ù„ØµÙ‚ ÙƒÙˆØ¯ HTML Ù‡Ù†Ø§..."></textarea>
        <div class="help-text">Ø§ÙØªØ­ Ù…Ù„Ù HTML Ø¨Ø£ÙŠ Ù…Ø­Ø±Ø± Ù†ØµÙˆØµØŒ Ø§Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„ØµÙ‚Ù‡ Ù‡Ù†Ø§</div>
    </div>
    
    <button onclick="deploy()" id="deployBtn">ğŸš€ Ù†Ø´Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†</button>
    
    <div class="result" id="result"></div>
</div>

<script>
    // Load saved settings
    window.onload = () => {
        document.getElementById('token').value = localStorage.getItem('gh_token') || '';
        document.getElementById('repo').value = localStorage.getItem('gh_repo') || '';
        document.getElementById('path').value = localStorage.getItem('gh_path') || 'sites';
        
        // Save on change
        document.getElementById('token').addEventListener('change', e => 
            localStorage.setItem('gh_token', e.target.value));
        document.getElementById('repo').addEventListener('change', e => 
            localStorage.setItem('gh_repo', e.target.value));
        document.getElementById('path').addEventListener('change', e => 
            localStorage.setItem('gh_path', e.target.value));
    };
    
    function showResult(type, icon, title, message, url = null) {
        const result = document.getElementById('result');
        result.className = `result ${type}`;
        result.style.display = 'block';
        
        let html = `
            <div class="result-icon">${icon}</div>
            <h3>${title}</h3>
            <p>${message}</p>
        `;
        
        if (url) {
            html += `
                <div class="result-url">
                    <a href="${url}" target="_blank">${url}</a>
                </div>
                <button class="btn-copy" onclick="copyUrl('${url}')">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                <button class="btn-copy" onclick="window.open('${url}', '_blank')">ğŸŒ ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
            `;
        }
        
        result.innerHTML = html;
    }
    
    function copyUrl(url) {
        navigator.clipboard.writeText(url).then(() => alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!'));
    }
    
    async function deploy() {
        const token = document.getElementById('token').value.trim();
        const repo = document.getElementById('repo').value.trim();
        const path = document.getElementById('path').value.trim() || 'sites';
        const siteName = document.getElementById('siteName').value.trim();
        const htmlCode = document.getElementById('htmlCode').value.trim();
        const btn = document.getElementById('deployBtn');
        
        // Validation
        if (!token || !repo) {
            showResult('error', 'âŒ', 'Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Token Ùˆ Repository');
            return;
        }
        
        if (!siteName) {
            showResult('error', 'âŒ', 'Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ù„Ù„Ù…ÙˆÙ‚Ø¹');
            return;
        }
        
        if (!htmlCode) {
            showResult('error', 'âŒ', 'Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ù„ØµÙ‚ ÙƒÙˆØ¯ HTML');
            return;
        }
        
        btn.disabled = true;
        btn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±...';
        showResult('loading', 'â³', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...');
        
        try {
            // Encode to base64
            const base64Content = btoa(
                encodeURIComponent(htmlCode).replace(/%([0-9A-F]{2})/g, (match, p1) => {
                    return String.fromCharCode(parseInt('0x' + p1));
                })
            );
            
            const apiUrl = `https://api.github.com/repos/${repo}/contents/${path}/${siteName}/index.html`;
            
            // Check if exists
            let sha = null;
            try {
                const checkRes = await fetch(apiUrl, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                if (checkRes.ok) {
                    const data = await checkRes.json();
                    sha = data.sha;
                }
            } catch (e) {}
            
            // Upload
            const uploadData = {
                message: `ğŸš€ Deploy: ${siteName}`,
                content: base64Content
            };
            if (sha) uploadData.sha = sha;
            
            const response = await fetch(apiUrl, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${token}`,
                    'Content-Type': 'application/json',
                    'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify(uploadData)
            });
            
            if (response.ok) {
                const [username, repoName] = repo.split('/');
                const siteUrl = `https://${username}.github.io/${repoName}/${path}/${siteName}/`;
                
                showResult('success', 'ğŸ‰', 'ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!', 
                    'Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¢Ù† Ù…ØªØ§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª. Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©.', siteUrl);
                
                // Reset
                document.getElementById('siteName').value = '';
                document.getElementById('htmlCode').value = '';
                
                setTimeout(() => window.open(siteUrl, '_blank'), 2000);
            } else {
                const errorData = await response.json();
                showResult('error', 'âŒ', 'ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±', errorData.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£');
            }
        } catch (error) {
            showResult('error', 'âŒ', 'Ø®Ø·Ø£', error.message);
        } finally {
            btn.disabled = false;
            btn.textContent = 'ğŸš€ Ù†Ø´Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†';
        }
    }
</script>

</body>
</html>